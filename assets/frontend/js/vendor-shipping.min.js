!function(t){if("undefined"==typeof mvx_vendor_shipping_script_data)return!1;var i=i||{build:function(){this.init(),this.bindEvents()},init:function(){this.modify_shipping_methods=".modify-shipping-methods",this.vendor_shipping_methods="#vendor-shipping-methods",this.shipping_by_zone_holder="#mvx_settings_form_shipping_by_zone",this.shipping_zone_table=this.shipping_by_zone_holder+" .shipping-zone-table",this.shipping_zone_list=".shipping-zone-list",this.shipping_method_manage_form="#mvx_shipping_method_manage_form",this.show_shipping_methods=this.vendor_shipping_methods+" .show-shipping-methods",this.add_shipping_methods=this.vendor_shipping_methods+" .add-shipping-method",this.edit_shipping_method=this.vendor_shipping_methods+" .edit-shipping-method",this.update_shipping_method=this.vendor_shipping_methods+" .update-shipping-method",this.delete_shipping_method=this.vendor_shipping_methods+" .delete-shipping-method",this.limit_zone_location=this.vendor_shipping_methods+" #limit_zone_location",this.method_status=this.vendor_shipping_methods+" .method-status",this.modal_close_link=".modal-close-link",this.modal_dialog=".mvx-modal-dialog"},bindEvents:function(){t(this.modify_shipping_methods).on("click",this.modifyShippingMethods.bind(this)),t(document).on("zone_settings_loaded",this.zoneLoadedEvents.bind(this)),t(document.body).on("change",".wc-shipping-zone-method-selector select",this.onChangeShippingMethodSelector),t(document).delegate(this.shipping_zone_list,"click",this.goToShippingZones.bind(this)),t(document).delegate(this.show_shipping_methods,"click",this.showShippingMethods.bind(this)),t(document).delegate(this.add_shipping_methods,"click",this.addShippingMethod.bind(this)),t(document).delegate(this.edit_shipping_method,"click",this.editShippingMethod.bind(this)),t(document).delegate(this.update_shipping_method,"click",this.updateShippingMethod.bind(this)),t(document).delegate(this.delete_shipping_method,"click",this.deleteShippingMethod.bind(this)),t(document).delegate(this.limit_zone_location,"click",this.limitZoneLocation.bind(this)),t(document).delegate(this.method_status,"change",this.toggleShippingMethod.bind(this)),t(document).delegate(this.modal_close_link,"click",this.closeModal.bind(this))},modifyShippingMethods:function(i,e){var n=this;t("#mvx_settings_form_shipping_by_zone").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),void 0!==i&&(i.preventDefault(),e=t(i.currentTarget).data("zoneId"));t.ajax({method:"post",url:mvx_vendor_shipping_script_data.ajaxurl,data:{action:"mvx-get-shipping-methods-by-zone",zoneID:e},success:function(i){t(n.vendor_shipping_methods).html(i.data.html).show(),t(n.shipping_zone_table).hide()},complete:function(){t("#mvx_settings_form_shipping_by_zone").unblock(),t(document).trigger("zone_settings_loaded")}})},zoneLoadedEvents:function(t){this.limitZoneLocation(t)},goToShippingZones:function(i){i.preventDefault(),t(this.vendor_shipping_methods).html("").hide(),t(this.shipping_zone_table).show(),window.location.reload()},onChangeShippingMethodSelector:function(){var i=t(this).find("option:selected").data("description");t(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(""),t(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(i)},showShippingMethods:function(i){i.preventDefault(),t("#mvx_shipping_method_add_container").show(),t("#mvx_shipping_method_add_container "+this.modal_dialog).show()},addShippingMethod:function(i){i.preventDefault();var e=this,n=t("#zone_id").val(),o=t("#shipping_method option:selected").val();if(""==n);else if(""==o);else{var s={action:"mvx-add-shipping-method",zoneID:n,method:o};t("#mvx_shipping_method_add_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"post",url:mvx_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i.success&&(t("#mvx_shipping_method_add_container").hide(),e.modifyShippingMethods(void 0,n))}})}},editShippingMethod:function(i){i.preventDefault(),t(".mvx-zone-method-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=t(i.currentTarget).parents(".edit_del_actions").data("instance_id"),n=t(i.currentTarget).parents(".edit_del_actions").data("method_id"),o=t(i.currentTarget).parents(".edit_del_actions").data("zone_id"),s={action:"mvx-vendor-configure-shipping-method",zoneId:o,instanceId:e,methodId:n};t.ajax({method:"post",url:mvx_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i&&(t(".mvx-zone-method-content").unblock(),t("#mvx_shipping_method_edit_container #method_id_selected").val(n),t("#mvx_shipping_method_edit_container #instance_id_selected").val(e),t("#mvx_shipping_method_edit_container #zone_id_selected").val(o),t("#shipping-form-fields").html(i.settings_html),t("#mvx_shipping_method_edit_container").show())}})},updateShippingMethod:function(i){i.preventDefault();var e=this,n=t("#mvx_shipping_method_edit_container #method_id_selected").val(),o=t("#mvx_shipping_method_edit_container #instance_id_selected").val(),s=t("#zone_id").val(),p={action:"mvx-update-shipping-method",zoneID:s,args:{instance_id:o,zone_id:s,method_id:n,settings:t("#mvx-vendor-edit-shipping-form").serializeArray()}};t("#mvx_shipping_method_edit_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"POST",url:mvx_vendor_shipping_script_data.ajaxurl,data:p,success:function(t){t.success?e.modifyShippingMethods(void 0,s):alert(t.data)}})},deleteShippingMethod:function(i){i.preventDefault();var e=this;if(confirm(mvx_vendor_shipping_script_data.i18n.deleteShippingMethodConfirmation)){var n=t(i.target).is(this.delete_shipping_method)?i.target:t(i.target).closest(this.delete_shipping_method),o=t(n).parents(".edit_del_actions").attr("data-instance_id"),s=t("#zone_id").val(),p=p={action:"mvx-delete-shipping-method",zoneID:s,instance_id:o};if(""==s);else if(""==o);else t.ajax({method:"post",url:mvx_vendor_shipping_script_data.ajaxurl,data:p,success:function(t){t.success?e.modifyShippingMethods(void 0,s):alert(resp.data)}})}},limitZoneLocation:function(i){t("#limit_zone_location").is(":checked")?(t(".hide_if_zone_not_limited").show(),t("#select_zone_states").select2()):t(".hide_if_zone_not_limited").hide()},toggleShippingMethod:function(i){i.preventDefault();var e=t(i.target).is(":checked"),n=t(i.target).val(),o=t("#zone_id").val(),s={action:"mvx-toggle-shipping-method",zoneID:o,instance_id:n,checked:e};if(""==o);else if(""==n);else{t(".mvx-container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"post",url:mvx_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i.success?t(".mvx-container").unblock():(t(".mvx-container").unblock(),alert(i.data))}})}},closeModal:function(i){i.preventDefault();var e=t(i.target).parents(this.modal_dialog);e.length&&(e.hide(),t(this.modal_dialog).hide())}};function e(i){var e=wc_country_select_params.countries.replace(/&quot;/g,'"'),n=t.parseJSON(e),o=i.val();if(n[o])if(t.isEmptyObject(n[o]))i.parent().find(".mvx_state_to_select").each(function(){$statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),$statebox.is("select")&&$statebox.replaceWith('<input type="text" name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" value="'+$statebox_val+'" class="mvx-text mvx_state_to_select multi_input_block_element" />')});else{input_selected_state="";var s="",p=n[o];i.parent().find(".mvx_state_to_select").each(function(){for(var i in $statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),p)if(p.hasOwnProperty(i)){if($statebox_val)if($statebox_val==i)var e='selected="selected"';else e="";s=s+'<option value="'+i+'"'+e+">"+p[i]+"</option>"}$statebox.is("select")&&$statebox.html('<option value="">'+wc_country_select_params.i18n_select_state_text+'</option><optgroup label="-------------------------------------"><option value="everywhere">'+mvx_vendor_shipping_script_data.everywhere_else_option+'</option></optgroup><optgroup label="-------------------------------------">'+s+"</optgroup>"),$statebox.is("input")&&($statebox.replaceWith('<select name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" class="mvx-select mvx_state_to_select multi_input_block_element"></select>'),$statebox=t("#"+$statebox_id),$statebox.html('<option value="">'+wc_country_select_params.i18n_select_state_text+'</option><optgroup label="-------------------------------------"><option value="everywhere">'+mvx_vendor_shipping_script_data.everywhere_else_option+'</option></optgroup><optgroup label="-------------------------------------">'+s+"</optgroup>")),$statebox.val($statebox_val)})}else i.parent().find(".mvx_state_to_select").each(function(){$statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),$statebox.is("select")&&$statebox.replaceWith('<input type="text" name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" value="'+$statebox_val+'" class="mvx-text mvx_state_to_select multi_input_block_element" />')})}function n(i){var e=i.data("limit");void 0===e&&(e=-1),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),i.children(".multi_input_block").each(function(){t(this)[0]!=i.children(".multi_input_block:last")[0]&&t(this).children(".add_multi_input_block").remove(),t(this).children(".add_multi_input_block").attr("title",mvx_vendor_shipping_script_data.mvx_multiblick_addnew_help),t(this).children(".remove_multi_input_block").attr("title",mvx_vendor_shipping_script_data.mvx_multiblick_remove_help)}),i.children(".multi_input_block").children(".add_multi_input_block").off("click").on("click",function(){var o=i.attr("id"),s=i.data("name"),p=i.data("length");p++;var d=i.children(".multi_input_block:first").clone(!1);d.find("textarea,input:not(input[type=button],input[type=submit],input[type=checkbox],input[type=radio])").val(""),d.find("input[type=checkbox]").attr("checked",!1),d.find(".select2-container").remove(),d.find("select").select2(),d.find("select").select2("destroy"),d.children(".multi_input_block_element:not(.multi_input_holder)").each(function(){var i=t(this),e=i.data("name");i.hasClass("mvx-wp-fields-uploader")||i.hasClass("wp-picker-container")||(i.attr("name",s+"["+p+"]["+e+"]"),i.attr("id",o+"_"+e+"_"+p))}),d.children(".multi_input_holder").each(function(){!function i(e,o,s,p){e.children(".multi_input_block:not(:last)").remove();var d=e.attr("id");d=d.replace(o+"_","");var a=d.split("_");var _="";for(var c=0;c<a.length-1;c++)""!=_&&(_+="_"),_+=a[c];e.attr("data-name",s+"["+p+"]["+_+"]");e.attr("id",o+"_"+_+"_"+p);e.children(".multi_input_block").children(".multi_input_block_element:not(.multi_input_holder)").each(function(){var i=t(this),e=i.data("name");if(i.hasClass("mvx-wp-fields-uploader"));else{var n=i.attr("multiple");void 0!==n&&!1!==n?i.attr("name",s+"["+p+"]["+_+"][0]["+e+"][]"):i.attr("name",s+"["+p+"]["+_+"][0]["+e+"]"),i.attr("id",o+"_"+_+"_"+p+"_"+e+"_0")}});n(e);e.children(".multi_input_block").children(".multi_input_holder").length>0&&e.children(".multi_input_block").css("padding-bottom","40px");e.children(".multi_input_block").children(".multi_input_holder").each(function(){i(t(this),o+"_"+_+"_0",s+"["+p+"]["+_+"]",0)})}(t(this),o,s,p)}),d.children(".remove_multi_input_block").off("click").on("click",function(){if(confirm(mvx_vendor_shipping_script_data.multiblock_delete_confirm)){var i=t(this).parent().parent(),n=i.children(".multi_input_block").children(".add_multi_input_block").clone(!0);t(this).parent().remove(),i.children(".multi_input_block").children(".add_multi_input_block").remove(),i.children(".multi_input_block:last").append(n),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none")}}),d.children(".add_multi_input_block").remove(),i.append(d),i.children(".multi_input_block:last").append(t(this)),i.children(".multi_input_block").length>1&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","block"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),i.data("length",p),i.find(".field_type_options").each(function(){t(this).off("change").on("change",function(){t(this).parent().find(".field_type_select_options").hide(),t(this).parent().find(".field_type_html_options").hide(),"select"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"mselect"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"dropdown"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"html"==t(this).val()&&t(this).parent().find(".field_type_html_options").show()}).change()}),i.find(".custom_field_is_group").each(function(){t(this).change(function(){t(this).is(":checked")?t(this).parent().find(".custom_field_is_group_name").css("visibility","visible"):t(this).parent().find(".custom_field_is_group_name").css("visibility","hidden")}).change()})}),i.hasClass("multi_input_block_element"),i.children(".multi_input_block").children(".multi_input_holder").length,i.children(".multi_input_block").children(".remove_multi_input_block").off("click").on("click",function(){if(confirm(mvx_vendor_shipping_script_data.multiblock_delete_confirm)){var i=t(this).parent().parent(),n=i.children(".multi_input_block").children(".add_multi_input_block").clone(!0);t(this).parent().remove(),i.children(".multi_input_block").children(".add_multi_input_block").remove(),i.children(".multi_input_block:last").append(n),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show()}}),i.find(".field_type_options").each(function(){t(this).off("change").on("change",function(){t(this).parent().find(".field_type_select_options").hide(),t(this).parent().find(".field_type_html_options").hide(),"select"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"mselect"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"dropdown"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"html"==t(this).val()&&t(this).parent().find(".field_type_html_options").show()}).change()}),i.find(".custom_field_is_group").each(function(){t(this).change(function(){t(this).is(":checked")?t(this).parent().find(".custom_field_is_group_name").css("visibility","visible"):t(this).parent().find(".custom_field_is_group_name").css("visibility","hidden")}).change()})}t(i.build.bind(i)),t("#shipping-options").change(function(){var i=t(this).val();"distance_by_shipping"==i?(t("#mvx-vendor-shipping-by-distance-section").show(),t("#mvx-vendor-shipping-by-zone-section").hide(),t("#mvx-vendor-shipping-by-country-section").hide()):"distance_by_zone"==i?(t("#mvx-vendor-shipping-by-distance-section").hide(),t("#mvx-vendor-shipping-by-zone-section").show(),t("#mvx-vendor-shipping-by-country-section").hide()):"shipping_by_country"==i&&(t("#mvx-vendor-shipping-by-distance-section").hide(),t("#mvx-vendor-shipping-by-country-section").show(),t("#mvx-vendor-shipping-by-zone-section").hide())}),"distance_by_shipping"==t("#shipping-options").val()?(t("#mvx-vendor-shipping-by-distance-section").show(),t("#mvx-vendor-shipping-by-zone-section").hide(),t("#mvx-vendor-shipping-by-country-section").hide()):"distance_by_zone"==t("#shipping-options").val()?(t("#mvx-vendor-shipping-by-distance-section").hide(),t("#mvx-vendor-shipping-by-zone-section").show(),t("#mvx-vendor-shipping-by-country-section").hide()):"shipping_by_country"==t("#shipping-options").val()&&(t("#mvx-vendor-shipping-by-distance-section").hide(),t("#mvx-vendor-shipping-by-zone-section").hide(),t("#mvx-vendor-shipping-by-country-section").show()),t(".mvx_country_to_select").select2(),t(".mvx-select").select2(),t(".mvx_country_to_select").each(function(){t(this).change(function(){e(t(this))}).change()}),setTimeout(function(){t("#mvx_shipping_rates").children(".multi_input_block").children(".add_multi_input_block").click(function(){t("#mvx_shipping_rates").children(".multi_input_block:last").find(".mvx_country_to_select").select2(),t("#mvx_shipping_rates").children(".multi_input_block:last").find(".mvx_country_to_select").change(function(){e(t(this))}).change()})},2e3),t(".multi_input_holder").each(function(){n(t(this))})}(jQuery);